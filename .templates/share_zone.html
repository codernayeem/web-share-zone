{% extends "empty_base.html" %}

{% block Title %}Share Zone | WSZ{% endblock %}

{% block head %}
<style>
</style>
{% endblock %}

{% block content %}

<div class="w-full fixed top-0 bg-gray-100 border-b-2 shadow-lg p-2 flex items-center text-gray-900">
    <p class="font-semibold text-xl m-0">Share Zone</p>
    <div class="ml-auto flex">
        <a class="ml-1 bg-blue-100 border text-gray-700 px-2 py-1 rounded">{{ current_user.get_name() }}</a>
        <a title="Refresh" class="ml-1 bg-indigo-500 hover:bg-indigo-700 px-2 py-1 rounded focus:outline-none cursor-pointer" onclick="location.reload(true)"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="21px" width="21px" x="0px" y="0px" viewBox="0 0 383.748 383.748" style="fill: white;">
            <g><path d="M62.772,95.042C90.904,54.899,137.496,30,187.343,30c83.743,0,151.874,68.13,151.874,151.874h30
                    C369.217,81.588,287.629,0,187.343,0c-35.038,0-69.061,9.989-98.391,28.888C70.368,40.862,54.245,56.032,41.221,73.593
                    L2.081,34.641v113.365h113.91L62.772,95.042z"/>
                <path d="M381.667,235.742h-113.91l53.219,52.965c-28.132,40.142-74.724,65.042-124.571,65.042
                    c-83.744,0-151.874-68.13-151.874-151.874h-30c0,100.286,81.588,181.874,181.874,181.874c35.038,0,69.062-9.989,98.391-28.888
                    c18.584-11.975,34.707-27.145,47.731-44.706l39.139,38.952V235.742z"/></g></svg>
        </a>
        <a title="Home Page" href="/" class="ml-1 bg-indigo-500 text-white hover:bg-indigo-700 px-2 py-1 rounded focus:outline-none"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="21px" width="21px" x="0px" y="0px" viewBox="0 0 495.398 495.398" style="fill: white;">
            <g><g><g><path d="M487.083,225.514l-75.08-75.08V63.704c0-15.682-12.708-28.391-28.413-28.391c-15.669,0-28.377,12.709-28.377,28.391
				v29.941L299.31,37.74c-27.639-27.624-75.694-27.575-103.27,0.05L8.312,225.514c-11.082,11.104-11.082,29.071,0,40.158
				c11.087,11.101,29.089,11.101,40.172,0l187.71-187.729c6.115-6.083,16.893-6.083,22.976-0.018l187.742,187.747
				c5.567,5.551,12.825,8.312,20.081,8.312c7.271,0,14.541-2.764,20.091-8.312C498.17,254.586,498.17,236.619,487.083,225.514z"/>
			<path d="M257.561,131.836c-5.454-5.451-14.285-5.451-19.723,0L72.712,296.913c-2.607,2.606-4.085,6.164-4.085,9.877v120.401
				c0,28.253,22.908,51.16,51.16,51.16h81.754v-126.61h92.299v126.61h81.755c28.251,0,51.159-22.907,51.159-51.159V306.79
				c0-3.713-1.465-7.271-4.085-9.877L257.561,131.836z"/></g></g></g></svg>
        </a>
        <a title="Logout" href="/logout" class="ml-1 bg-red-500 text-white hover:bg-red-600 px-2 py-1 rounded focus:outline-none"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="21px" width="21px" x="0px" y="0px" viewBox="0 0 96.943 96.943" style="fill: white;">
            <g><path d="M61.168,83.92H11.364V13.025H61.17c1.104,0,2-0.896,2-2V3.66c0-1.104-0.896-2-2-2H2c-1.104,0-2,0.896-2,2v89.623
                c0,1.104,0.896,2,2,2h59.168c1.105,0,2-0.896,2-2V85.92C63.168,84.814,62.274,83.92,61.168,83.92z"/>
            <path d="M96.355,47.058l-26.922-26.92c-0.75-0.751-2.078-0.75-2.828,0l-6.387,6.388c-0.781,0.781-0.781,2.047,0,2.828
                l12.16,12.162H19.737c-1.104,0-2,0.896-2,2v9.912c0,1.104,0.896,2,2,2h52.644L60.221,67.59c-0.781,0.781-0.781,2.047,0,2.828
                l6.387,6.389c0.375,0.375,0.885,0.586,1.414,0.586c0.531,0,1.039-0.211,1.414-0.586l26.922-26.92
                c0.375-0.375,0.586-0.885,0.586-1.414C96.943,47.941,96.73,47.433,96.355,47.058z"/></g></svg>
        </a>
    </div>
</div>

<div class="w-full fixed bottom-0 bg-gray-200 border-t-2 p-3 flex items-center text-gray-900">
    <form class="flex-grow flex items-center" action="/sharezone/upload" method="POST">
        <input name="data" type="text" class="border px-1 mr-1 flex-1 bg-gray-100 py-1" placeholder="message" required>
        <input name="data_type" value="message" hidden>
        <div class="flex-grow-0 flex ml-1">
            <button type="submit" class="bg-indigo-500 hover:bg-indigo-600 px-2 py-1 rounded mx-1 focus:outline-none cursor-pointer"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="20px" width="20px" x="0px" y="0px" viewBox="0 0 535.5 535.5" style="fill: white;">
                <g><g><polygon points="0,497.25 535.5,267.75 0,38.25 0,216.75 382.5,267.75 0,318.75"/></g></g></svg>
            </button>
            <a class="bg-indigo-500 text-white hover:bg-indigo-600 px-2 py-1 rounded mx-1 focus:outline-none cursor-pointer" data-toggle="modal" data-target="#uploadmodal"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" height="20px" width="20px" x="0px" y="0px" viewBox="0 0 1000 1000" style="fill: white;">
                <g><path d="M850,974.5H150c-77.3,0-140-65.3-140-145.9V646.3c0-20.1,15.7-36.5,35-36.5h70c19.3,0,35,16.3,35,36.5v109.4c0,40.3,31.3,72.9,70,72.9h560c38.7,0,70-32.7,70-72.9V646.3c0-20.1,15.7-36.5,35-36.5h70c19.3,0,35,16.3,35,36.5v182.3C990,909.2,927.3,974.5,850,974.5L850,974.5z M784.5,449.2c-14.2,14.8-37.1,14.8-51.3,0L570,279.1v367.2c0,20.1-15.7,36.5-35,36.5h-70c-19.3,0-35-16.3-35-36.5V279.1L266.8,449.2c-14.2,14.8-37.1,14.8-51.3,0l-51.3-53.4c-14.2-14.8-14.2-38.7,0-53.4L453.2,41.1c1.2-1.3,23.7-15.6,46.4-15.6c22.9,0,45.9,14.3,47.2,15.6l289.1,301.2c14.2,14.8,14.2,38.7,0,53.4L784.5,449.2L784.5,449.2z"/></g></svg>
            </a>
        </div>
    </form>
</div>

<div class="container mx-auto p-2 my-16">
    <div class="p-2 pt-0">

        {% if total_count == 0 %}
        <div class="border-l-4 border-orange-600 bg-orange-100 text-red-700 p-3 mb-2">
            <p class="font-bold text-lg">Nothing found to show</p>
            <p>Please, try again later</p>
        </div>
        {% else %}

        {% for i in shareZone %}

        {% if i.data_type == 'message'%}
        <div class="mb-3 {% if i.user == current_user.id %} ml-auto {% endif %}" style="width: 80%;">
            <p class="mb-1">{% if i.user_obj %} {{i.user_obj.get_name()}} {% else %} Someone {% endif %}</p>
            <div class="pr-5 ml-2">
                <p class="text-gray-700 rounded m-0 px-2 py-1" {% if i.user == current_user.id %} style="background-color: #0086b3; color: #fffdf2;" {% else %} style="background-color: #ebebeb;" {%endif%}>{{ i.data_content }}</p>
                <pre class="mt-1 text-gray-500 text-xs">{{ get_polished_datetime(i.publish_date) }}</pre>
            </div>
        </div>
        {% else %}
        <div class="mb-3 {% if i.user == current_user.id %} ml-auto {% endif %}" style="width: 80%;">
            <p class="mb-1">{% if i.user_obj %} {{i.user_obj.get_name()}} {% else %} Someone {% endif %}</p>
            <div class="pr-5 ml-2">
                <div class="w-full items-center px-2 py-1 border-2 border-indigo-100 rounded bg-gray-200 flex" style="{% if i.user == current_user.id %} background-color: #89aebd; color: #fffdf2; {% else %} background-color: #ebebeb; {%endif%}">
                    <img class="flex-shrink mr-2" src="{{ url_for('static', filename=get_icon(i.extension, i.file_type))}}" alt="icon" style="height: 22px; width: 22px;">
                    <pre class="flex-grow overflow-x-auto">{{ i.data_content }}</pre>
                    <a class="flex-grow-0 ml-2" href="{{ url_for('downloadzone_download', id=i.sharezone_id) }}" title="{{ i.data_content }}">
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="22px" height="22px" viewBox="0 0 433.5 433.5" style="fill: {% if i.user == current_user.id %} #f5f1f1 {% else %} #2d3135 {%endif%};" xml:space="preserve"><g><g><path d="M395.25,153h-102V0h-153v153h-102l178.5,178.5L395.25,153z M38.25,382.5v51h357v-51H38.25z"/></g></g></svg>
                    </a>
                </div>
                <pre class="mt-1 text-gray-500 text-xs">{{ get_polished_datetime(i.publish_date) }}</pre>
            </div>
        </div>
        {% endif %}

        {% endfor %}

        {% endif %}
    </div>

</div>

{% endblock %}